---
layout: post
title: "assembly language (8086/Pentium)"
subtitle: '[assembly language wangshuang 3ed] - concepts' 
author: "twistfatezz"
header-style: text
# header-img: "img/in-post/economics_1/headimg.png"
# header-mask: 0.8
comments: false 
mathjax: false 
date: 2022-02-15 09:19
lang: ch 
catalog: true 
categories: assembly
tags:
  - Time 2022
---
### chapter-1/2 概述/微处理器
**1 状态周期/时钟周期**：CPU的基本定时单位称为状态周期或者时钟周期。例如，假设8086的主频为10MHz，那么一个状态周期就是100ns。<br>
**2 总线周期**：CPU为了读取指令或传送数据，需要通过总线接口部件BIU与存储器或I/O接口进行信息交互，执行对总线的操作。进行一次数据传送的总线操作定义为一个总线周期。一个总线周期是由多个状态周期组成，典型的总线周期包含4个状态周期。<br>
**3 空闲周期**：系统总线处在空闲状态时的时钟周期称作空闲周期。<br>
**4.中断**：所谓中断，就是在一定条件下，CPU可以随时中断当前任务转向处理内部故障和外部设备请求服务的机制。中断可以由软件产生也可以由硬件产生。<br>
**5.中断向量**：所谓中断向量就是中断处理子程序的入口地址，每个中断类型对应一个中断向量。每个中断向量需要用4个字节表示，这4个字节中包含了中断服务程序的段地址和偏移量。<br>
**6.中断向量表**：中断向量表就是一块位于存储器的前1024个字节内存区域，地址为000000H~0003FFH。这1024个字节直观地被分为256份，每份4字节，即一个中断向量。<br>
**7.内部中断**：内部中断是CPU执行指令出现错误而引发的中断或CPU执行INT n指令产生的中断。内部中断包括除法错中断、单步中断、断点中断、溢出中断和其它INT指令中断。<br>
**8.外部中断**：外部中断的中断源来自CPU外部，是由外部设备产生的，当外设需要即时和CPU进行数据交互时，请求CPU中断当前执行的程序。此时，由外设的中断请求电路向CPU发出中断请求。外部中断也称为硬件中断。<br>
**9.软件中断**：软件中断是CPU执行INT指令或者指令执行出现错误而产生的中断，软件中断的产生过程和硬件无关。<br>
**10.可屏蔽中断**：可屏蔽中断是指中断请求受到中断允许触发器控制的这类中断，它是可以被屏蔽的。<br>
**11.断点**：所谓断点，就是中断发生时当前程序中下一条指令的地址，包括指令指针IP和代码段寄存器CS的内容。<br>
**12.单步中断**：单步中断的含义是每执行一条指令，就进入一次单步中断处理程序，此程序用来显示出一系列寄存器的值和一些附带的信息。单步中断用来给程序员提供一个调试程序的手段。<br>
**13.流水技术**：将指令执行这个重复的过程分解为若干个子过程，使得每个子过程可以与其他子过程同时进行，这种实现时间并行性的技术叫做流水技术。<br>
**14.超标量技术**：与流水线技术不同，超标量技术不是利用时间并行性，而是在处理机内设置多个相同功能的部件，让它们并行工作，从而实现空间上的并行性。<br>
**15.指令分支预测**：在流水线中，如果遇到转移指令，那么当转移指令没有执行完时，处理器就不会知道是否会真的发生转移，因此也就不知道从哪里预取指令。为了让流水线的指令预取操作不停顿，就需要根据历史情况，对当前的转移是否会真的发生进行预测。这种指令预测技术称作指令分支预测，也叫转移预测。<br>
**16.指令的分支预测逻辑：**它可以对将要执行的分支指令进行动态的转移预测。分支预测逻辑是以该分支指令的历史执行情况为预测依据的，因此预测有较大的成功率。在预测正确的情况下，完全避免了时间的延误。如果预测错误，则要花费3~4CLK代价。<br>
**17.保护模式**：保护模式即保护虚地址模式，是Pentium微处理器的基本操作方式。该模式可以对复杂的多任务操作系统环境提供全方位的支持，实现了各种复杂的系统管理功能。
保护模式对存储器和数据有多种保护能力。任务和用户程序之间，用户程序与操作系统之间具有不同的权限。
在保护模式下，系统可以寻址64TB的虚拟地址空间。Pentium微处理器的存储管理机制具有将虚拟逻辑地址转换到线性地址，进而得到物理地址的功能。通过描述符表等内存管理数据结构，将大容量的磁盘存储空间映射到内存储器空间。<br>
**18.实地址模式**：实地址模式用于系统的初始化，在系统加电和复位以后，微处理器进入实地址模式。在实地址模式中，采用和8086类似的编程环境，只是在8086基础上进行了扩充，扩展了32寄存器的指令，并在8086的编程寄存器上增加了一些新的寄存器。它的寻址机构、存储管理方式、中断处理机制和8086微处理器类似。在实地址模式中，不使用虚拟地址。<br>
**19.虚拟8086模式**：虚拟8086方式实质上是保护方式的一种功能。虚拟8086方式可以在保护方式以及多任务的情况下运行8086的程序。该方式具有保护方式的任务属性，属于一种准操作方式。目的是为了让在8086方式下编制的软件在保护方式下仍然能够执行。<br>
**20.系统管理模式**：系统管理方式提供了一种对操作系统或用户透明的专用程序，实现了操作系统平台的专用功能，如电源管理，系统安全管理等。这些专用程序只能被系统固件所利用，专用代码的运行透明于操作系统。系统管理方式只有在外部中断SSMI＃有效时CPU保存了运行程序或任务的上下文关系之后，才切入独立的系统管理程序的地址空间。


### chapter-3 微处理器与I/O设备的数据传输方式/数据传输的控制方式
**1.程序查询方式**：在I/O接口当中有一个反映接口状态的寄存器，在满足数据传送条件的情况下，状态寄存器会呈现一定的状态。程序查询方式就是通过执行程序，不断查询接口的状态，一旦发现外设做好数据传送的准备就转向执行数据传送程序。<br>
**2.异步数据传输**：异步方式又称为条件方式。异步方式传输时，字符是一帧一帧的传送，发送方和接收方没有统一的时钟控制，每一帧字符的传送靠起始位来同步。通信中，两个字符的时间间隔是不固定的，但在同一字符中的两个相邻代码间的时间间隔是固定的。<br>
**3.同步数据传输**：同步方式也称作无条件传送方式。同步传输时，由一个统一的时钟控制发送方和接收方，因此字符间不需要同步位，字符一个接一个地传送。在没有字符时，也要发送专用的同步字符或者“空闲”字符。<br>
**4.DMA**：DMA即直接存储器存取(Direct Memory Access)。直接存储器存取控制方式是由DMA控制器来实现对存储器的直接访问，控制存储器与I/O设备之间或者存储器与存储器之间的数据传送。<br>
**5.DMA通道**：一般地，一个DMA控制器可以连接几个I/O接口。我们将DMA控制器中与某个I/O接口相关的部分称作一个通道。<br>
**6.DMA随机请求传送**：随机请求传送是8237A的一种传送方式。在该方式的传送过程中，每传送完一个字节，DMAC都需要测试DMA请求信号DREQ的状态。如果DREQ为有效状态，则继续进行DMA传送，直至字节计数器为0。如果DREQ为无效状态，DMAC便释放总线，并继续测试DREQ的状态，只有在DREQ回到有效状态以后，DMAC才继续控制数据传送。<br>
**7.总线主控制器**：像CPU那样能够控制系统总线进行数据传输的部件称作总线主控制器。常见的总线主控还有DMA控制器。<br>


### chapter-4 微型计算机与外设的接口技术及相关芯片
**1.分辨率**: 描述A/D、D/A转换电路对微小模拟量的分辨能力，通常用数字量的位数来表示，数字量的位数越长，分辨率越高。分辨率一般有8位、12位、16位、20位等。<br>
**2.最小位当量(LSB)**：在一定的量程上，一个最低数字有效位所表示的模拟量的大小。例如12位分辨率的A/D转换器在5V量程上的最小位当量为1.25mV。<br>
**3.串行同步通信**：发送和接收的双方使用的是一个时钟，有这样一个共同的时钟来进行管理，就可以以时钟或时钟的整倍数为基准，对数据位进行采样，再根据同步字符来保证传输的同步。<br>
**4.波特率**：波特率即传输率，就是在通信过程中每秒传输数据的位数。<br>
**5.分辨率**: 描述A/D、D/A转换电路对微小模拟量的分辨能力，通常用数字量的位数来表示，数字量的位数越长，分辨率越高。<br>
**6.单工**：接收和发送器之间只有一根传输线连接，并且只允许在一个方向传送数据。<br>
**7.半双工**：接收和发送器之间只有一根传输线连接，发送和接收数据分时交替进行。通过软件和接口的协调控制，实现数据传输的方向转换。<br>
**8.全双工**：接收和发送器之间有两根传输线连接，承担两个不同方向的数据传送，发送数据和接收数据可以同时进行。<br>
**9.RS-232**：RS-232是一种异步串行通信标准，适用于数据终端设备(DTE)和数据通信设备(DCE)之间的通信接口。标准的主要内容有，连接器的机械特性、电气特性和控制信号的定义等。<br>
**10.握手信号**：在通信开始前，数据的发送方和接收方为了确认对方是否“准备好”而发送的询问与应答信号，这些信号就是常说的握手信号，而这个询问与应答的过程即握手过程。<br>


### chpater-5 存储器系统和存储管理
**1.Cache**：就是我们所说的高速缓存，其特点是存取速度快，一般是小容量的SRAM。在分层存储系统中，通过高速Cache的应用来提高存储系统的整体性能。<br>
**2.直接映射**：直接映射就是把主存的每一块分别映射到某一个固定可用的Cache行中。它们的映射关系是：Cache行号 = 主存块号 mod Cache行数。<br>
**3.相联映射**：相联映射允许每个主存块装入Cache的任意一行，主存块在Cache各行中的存放是无序的，标记域便成了标识主存块的唯一标志。<br>
**4.组相联映射**：组相联映射是直接映射和相联映射方法的结合。在组相联映射的结构中，将Cache分为m组，每组r'行，主存中共有s个数据块，每s/r'个数据块可以分别装入某一相同行号的m个Cache行中。<br>
**5.写直达**：写操作对Cache和主存储器同时进行，从而保证主存储器数据的有效性。<br>
**6.写回**：写操作只对Cache进行，对写入行设置修改标志。当某一个数据块要被替换时，只有他的修改标志被置位时，才将他回写到主存储器。<br>
**7.Cache一致性**：Cache一致性是指，Cache行的数据能够和所有与它的地址有关联的存储单元保持数据保持一致。<br>
**8.Cache命中**：每当CPU需要访问某个存储器单元时，首先在Cache中查找是否存在该存储单元的副本，如果存在则是Cache命中。<br>
**9.Cache替换算法**：当Cache访问不命中，需要对主存访问并将数据块装入Cache时，Cache行中原来的数据将被替换。对于组相联映射和相联映射，主存中特定块可以对应多组或任意Cache行，Cache替换算法就是用来决定替换哪一Cache行。<br>
**10.段描述符**：段描述符用于提供段的基址、段长、段类型以及当前特权级等段的信息。它由2个双字即64字节组成。<br>
**11.分页技术**：在保护方式下，处理器将线性地址空间通过分页间接映射到一个较小的物理存储空间和磁盘存储器中。在采用分页技术时，处理器将线性地址空间划分为固定大小的页面，这些页面能够被映射到物理存储器和磁盘存储器中。<br>


### chapter-6 系统总线
**1.总线**：计算机系统中各模块之间互连的链路叫做总线，它支持模块之间的信息传送。<br>
**2.内部总线**：内部总线指的是连接微处理器内部各个功能单元之间的连线。<br>
**3.外部总线**：外部总线通常指连接微计算机的CPU、存储器和I/O接口等模块的地址、数据和控制线。<br>
**4.局部总线**：局部总线是微处理器模块具有的本地总线，它可连接多个非主模块，但与系统总线上的其他主模块无关。局部总线也称作本地总线，如PCI总线、IP总线、IO CHANNEL等等。<br>
**5.系统总线**：系统总线是微型计算机系统的公共总线，是多处理机系统中各个处理机模块之间的公共总线，因此也称作全局总线。它支持多个处理机模块之间的以及和它们的共享模块之间的数据交互。VME总线、MULTIBUS等是广泛流行的系统总线。<br>
**6.总线周期**：总线周期即总线主占用总线的时间，总线主模块为启始模块，非总线主模块为响应模块或目标模块。<br>
**7.总线仲裁**：如果系统中有两个或两个以上处理器同时希望使用总线，发出总线请求时，就引起了总线的仲裁问题。总线的仲裁技术也叫做通道分配技术，用于解决由多个总线主引起的总线竞争问题。<br>
**8.集中式总线仲裁**：具有中央总线控制器的系统由中央总线控制器为各个总线主分配总线时间，这种仲裁方式为集中式仲裁。<br>
**9.分布式总线仲裁**：系统中没有中央总线控制器，每个主模块包含了各自访问总线的控制逻辑，它们通过公共总线相互连接。请求总线的每个总线主设备向公用总线发送各自的优先级编码，并接收、比较来自其它请求总线主设备的优先级编码，分别进行总线裁决。仲裁结束时，优先级最高的编码保留在总线上，具有该编码的主设备获得了总线权。<br>
**10.总线的宽度**：总线的宽度是指总线中数据线的宽度，也就是其一次操作可以传输的数据位数。<br>
**11.传输线效应**：在频率较高的环境中，如果传输线阻抗过高，便会发生部分信号波的反射，这种现象叫做传输线效应。<br>
**12.总线复用**：相同的信号线在不同的时刻，支持两种功能或者多种功能的数据传输，叫做总线的分时复用。<br>
**13.总线传输定时**：在利用总线进行信息传送时，必须遵守的一定的定时规则，使传送双方互相同步。总线传输定时一般可以分为两种方式，同步方式与异步方式。



## Reference
> https://pop0726.github.io/pc/text/mulu.htm <br>

> 1 当使用inline数学公式且公式经过GFM排版之后都在同一行 使用`$...$`符号<br>
> 2 当希望数学公式单独成行或者经过GFM排版之后占用多行 应当使用`$$...$$`符号<br>
> 3 对于表示条件概率 需要表示竖线的时候`|` 应当使用`\mid` 而不是直接在键盘上打出`|` => 容易被编辑器认为是一个md制表符<br>
> 4 在md引入图片的时候 不要使用`<center>`和`</center>` 在这篇文档的编辑过程中vscode的preview插件在使用了上述符号之后 导致下一段的数学公式预览显示不正常<br>
> 5 使用md的时候 单独的两段文字上下需要空出一行<br>
> 6 想要强制换行的时候 需要使用`<br>`而不是`<enter>`<br>
> 7 特殊字符如果想要避免和md解析关键字冲突 应当使用\`\`将关键字包含在内 <br>
> 8 `<center><img src="/img/in-post/economics_4/xxx.png" width="60%"></center>` <br>
> 9 使用html设置图片文字环绕方式：<br>
    `<div>` <br>
        `<img src="/img_path" align="left" width="40%" hspace="" vspace=""/>` <br>
        `<p>paragraph1 around the picture</p>` <br>
        `<p>paragraph2 around the picture</p>` <br>
        `<p>paragraph3 around the picture</p>` <br>
    `</div>` <br>
> 10 `<font style="color:red; font-weight:bold">加粗蓝色</font>`用来设置字体颜色 <br>
> 11 使用html设置可折叠部分内容：<br>
  `<details>` <br>
      `<summary><b>[点击展开] xxx</b></summary>` <br>
      `<center><img src="/img/in-post/tcp-ip_img/tcp_20_9.pdf" width="100%"></center>` <br>
  `</details>` <br>
> 12 问题脚注: ???problem😫problem???
